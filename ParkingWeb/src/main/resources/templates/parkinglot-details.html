<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Chi tiết bãi đỗ xe</title>
        <style>
            body {
                font-family: 'Segoe UI', sans-serif;
                background: linear-gradient(to right, #e0f7fa, #ffffff);
                margin: 0;
                padding: 20px;
            }

            .container {
                max-width: 600px;
                margin: auto;
                background-color: #ffffff;
                padding: 30px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                animation: fadeIn 0.6s ease-in-out;
                text-align: center;
            }

            h1 {
                color: #00796b;
            }

            p {
                font-size: 18px;
                margin: 10px 0;
            }

            strong {
                color: #004d40;
            }

            .back-link {
                display: inline-block;
                margin-top: 20px;
                padding: 10px 16px;
                background-color: #00796b;
                color: white;
                text-decoration: none;
                border-radius: 8px;
                transition: background-color 0.3s ease;
            }

            .back-link:hover {
                background-color: #004d40;
            }

            .parking-image {
                width: 100%;
                max-height: 300px;
                object-fit: cover;
                border-radius: 8px;
                margin-bottom: 20px;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .not-found {
                text-align: center;
                color: #d32f2f;
                font-size: 20px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 30px;
                animation: fadeIn 0.6s ease-in-out;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            }

            table thead {
                background-color: #00796b;
                color: white;
            }

            table th, table td {
                padding: 12px 15px;
                border: 1px solid #e0e0e0;
                text-align: center;
                font-size: 16px;
            }

            table tbody tr:nth-child(even) {
                background-color: #f5f5f5;
            }

            .no-reviews {
                margin-top: 20px;
                color: #555;
                font-style: italic;
                font-size: 17px;
                animation: fadeIn 0.5s ease-in-out;
            }
        </style>
    </head>
    <body>
        <div class="container" th:if="${parkingLot != null}">
            <h1>Chi tiết bãi đỗ xe</h1>

            <!-- Thêm ảnh bãi đỗ -->
            <img class="parking-image"
                 th:src="${parkingLot.img != null} ? ${parkingLot.img} : '@{/images/default.jpg}'"
                 alt="Ảnh bãi đỗ xe">

            <p><strong>Tên bãi đỗ:</strong> <span th:text="${parkingLot.name}"></span></p>
            <p><strong>Địa chỉ:</strong> <span th:text="${parkingLot.address}"></span></p>
            <p><strong>Số chỗ:</strong> <span th:text="${parkingLot.totalSlots}"></span></p>
            <p><strong>Giá mỗi giờ:</strong>
                <span th:text="${#numbers.formatDecimal(parkingLot.pricePerHour, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'"></span>
            </p>
            <p><strong>Các tiện ích:</strong> <span th:text="${parkingLot.amenities}"></span></p>
            <p><strong>Mô tả:</strong> <span th:text="${parkingLot.description}"></span></p>





            <div th:if="${parkingLot.reviewSet != null && #lists.size(parkingLot.reviewSet) > 0}">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Người dùng</th>
                            <th>Rating</th>
                            <th>Bình luận</th>
                            <th>Ngày đánh giá</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="r : ${parkingLot.reviewSet}">
                            <td th:text="${r.userId.fullName}"></td>
                            <td th:text="${r.rating}"></td>
                            <td th:text="${r.comment}"></td>
                            <td th:text="${#dates.format(r.createdAt, 'dd/MM/yyyy')}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div th:if="${#lists.size(parkingLot.reviewSet) == 0}">
                <p class="no-reviews">Chưa có đánh giá nào cho bãi đỗ xe này.</p>
            </div>



            <a class="back-link" th:href="@{/}">← Quay lại trang chủ</a>
        </div>

        <div class="container not-found" th:if="${parkingLot == null}">
            <p>Không tìm thấy thông tin bãi đỗ xe.</p>
            <a class="back-link" th:href="@{/}">← Quay lại</a>
        </div>
    </body>
</html>
